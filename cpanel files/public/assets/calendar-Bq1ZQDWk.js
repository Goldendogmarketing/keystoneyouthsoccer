import{k as i,l as r,q as u,j as e,C as ce,n as de,r as x,x as K}from"./main-Cj5NYhJq.js";import{u as oe}from"./useQuery-Dpd-_BN-.js";import{u as w}from"./useMutation-Q6yEhfYM.js";import{C,b as k,d as P,a as D}from"./card-Ck-Z1Ioi.js";import{B as l}from"./button-cJjcAD9d.js";import{I as j}from"./input-DLMUXFSQ.js";import{L as h}from"./label-CyVxfSYH.js";import{T as me}from"./textarea-DixNolmW.js";import{D as he,b as ue,c as xe,d as pe,e as ge,f as fe}from"./dialog-CM6ugvJB.js";import{C as O}from"./calendar-jDKXpgky.js";import{P as A}from"./plus-DeJg0nJ7.js";import{C as je}from"./chevron-left-C6UyHtVM.js";import{C as ve}from"./chevron-right-CCqzOlOj.js";import{C as be}from"./clock-C1xtiy3x.js";import{M as ye}from"./map-pin-DNGYzB5p.js";import{U as Ne}from"./users-C3BdU3O1.js";import{S as we}from"./square-pen-B_Njxa3a.js";import{X as Ce}from"./x-nACMLnX-.js";import{T as De}from"./trash-2-Bj50Vj3Q.js";import"./useBaseQuery-BBplwDo0.js";import"./utils-CDN07tui.js";import"./index-B_jtOnfb.js";import"./index-DJ6iqbtG.js";import"./index-DGzlw-Oo.js";const Te=i({method:"GET"}).handler(r("7afa32a60154902a081b399d6f42aa61882b431f5759fb1f485d797422d36fee")),Ee=i({method:"GET"}).handler(r("095209b16a801ece1d9215186531ecb430c41617d81bec20e75f6ebf3120812a")),Fe=i({method:"GET"}).handler(r("170ff47465c72d46f1628aee6ed01e804c9016edb69131bdc6e12116ff071c5c")),Se=i({method:"GET"}).handler(r("849572a8c12a2befef998cde22a07731ffdd3021b5088e3d47feb16360dfefe1")),Me=i({method:"GET"}).handler(r("98f9495b995c25e53e3d7d40bf5737a1766ef987c979a20de260b486ee2f82d9")),qe=i({method:"GET"}).handler(r("89c962d3115f0f032df9303ffc5183f5c452e7ed5173ff6371c89d86428b4358")),ke=i({method:"GET"}).handler(r("7be6fda7a70f103c05be9ee0bfcfef6dac27da3706611c352ed975dfcacebe30")),Pe=i({method:"POST"}).handler(r("66aaa9d88c4a26fcfe3912d370aa4cb5deab6906d80390edb04335bc48f8dd20")),Oe=i({method:"POST"}).handler(r("18fd6edbe5c87a8a12c56bc49b0a7b7b66785cc54cd68da27ae5dd14b583b6b2")),Ae=i({method:"POST"}).handler(r("a575bc33934d99dcf2bf88e6cbe1b950782d145ad0831c3aed6f8fa2addc8bb0")),Ge=i({method:"POST"}).handler(r("455f21b8efd8f72ed120b216764ea1dbfb80707ca5a81bc633e67731d5a3dc20"));i({method:"POST"}).handler(r("a25c529fcf519ce084acaea6f558da9c1e834d17a17e6ee2175989c396ae64b4"));i({method:"POST"}).handler(r("ffe1ce42ba802b0ff706685c82ca46cbba68bc27453efef781e240db2c21894d"));i({method:"GET"}).handler(r("befb000d2430cd0b18db28f1de1435c0b0ea80491c16de8e75f67f071fdfc7af"));i({method:"POST"}).handler(r("a802285cc15b4f5bed1ce9420d7e10f41977cb65d8e2af1a84cf8c625dcc8739"));i({method:"GET"}).handler(r("d7653389330c3b474c9fe2bf049359efa65b845f113e9393cb2a27256afcea5a"));const Ke={all:()=>u({queryKey:["events"],queryFn:async({signal:a})=>await Te({signal:a}),staleTime:1e3*60}),filtered:a=>u({queryKey:["events","filtered",a],queryFn:async({signal:s})=>await Ee({data:a,signal:s}),staleTime:1e3*60}),byDateRange:(a,s)=>u({queryKey:["events","range",a,s],queryFn:async({signal:m})=>await Fe({data:{startDate:a,endDate:s},signal:m}),staleTime:1e3*60}),byTeam:(a,s=!0)=>u({queryKey:["events","team",a,s],queryFn:async({signal:m})=>await Me({data:{teamId:a,includeAway:s},signal:m}),staleTime:1e3*60}),byAgeGroup:(a,s)=>u({queryKey:["events","ageGroup",a,s],queryFn:async({signal:m})=>await qe({data:{ageGroup:a,seasonId:s},signal:m}),staleTime:1e3*60}),upcoming:()=>u({queryKey:["events","upcoming"],queryFn:async({signal:a})=>await Se({signal:a}),staleTime:1e3*60*5}),ageGroups:()=>u({queryKey:["events","ageGroups"],queryFn:async({signal:a})=>await ke({signal:a}),staleTime:1e3*60*10})},G={title:"",description:"",type:"event",date:"",time:"",location:"",teamName:"",opponent:""};function Ye(a,s){return new Date(a,s+1,0).getDate()}function ze(a,s){return new Date(a,s,1).getDay()}const Le=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$e=["January","February","March","April","May","June","July","August","September","October","November","December"],Ie=[{value:"game",label:"Game"},{value:"practice",label:"Practice"},{value:"event",label:"Event"},{value:"meeting",label:"Meeting"},{value:"tournament",label:"Tournament"}];function pt(){return e.jsx(ce,{fallback:e.jsx(Qe,{}),children:e.jsx(Be,{})})}function Qe(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Calendar"})}),e.jsx(C,{children:e.jsx(D,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(K,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})})]})}function Be(){const a=de(),[s]=x.useState(()=>new Date),[m,T]=x.useState(()=>{const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)}),[d,Y]=x.useState(null),[z,L]=x.useState("month"),[_,v]=x.useState(!1),[b,$]=x.useState(null),[n,o]=x.useState(G),{data:I=[],isLoading:Z}=oe(Ke.all()),Q=w({mutationFn:async t=>await Pe({data:{title:t.title,description:t.description||void 0,type:t.type,date:t.date,time:t.time,location:t.location,teamName:t.teamName||void 0,opponent:t.opponent||void 0}}),onSuccess:()=>{a.invalidateQueries({queryKey:["events"]}),y()}}),B=w({mutationFn:async({id:t,data:c})=>await Oe({data:{id:t,title:c.title,description:c.description||void 0,type:c.type,date:c.date,time:c.time,location:c.location,teamName:c.teamName||void 0,opponent:c.opponent||void 0}}),onSuccess:()=>{a.invalidateQueries({queryKey:["events"]}),y()}}),R=w({mutationFn:async t=>await Ae({data:{id:t}}),onSuccess:()=>{a.invalidateQueries({queryKey:["events"]})}}),E=w({mutationFn:async t=>await Ge({data:{id:t}}),onSuccess:()=>{a.invalidateQueries({queryKey:["events"]})}}),y=()=>{v(!1),$(null),o(G)},p=m.getFullYear(),g=m.getMonth(),ee=Ye(p,g),te=ze(p,g),ae=()=>{T(new Date(p,g-1,1))},se=()=>{T(new Date(p,g+1,1))},ne=()=>{T(new Date(s.getFullYear(),s.getMonth(),1)),Y(s)},U=t=>I.filter(c=>{const f=new Date(c.date);return f.getDate()===t.getDate()&&f.getMonth()===t.getMonth()&&f.getFullYear()===t.getFullYear()}),F=t=>{switch(t){case"game":return"bg-blue-500";case"practice":return"bg-green-500";case"event":return"bg-purple-500";case"meeting":return"bg-orange-500";case"tournament":return"bg-red-500";default:return"bg-gray-500"}},H=t=>{$(t.id),o({title:t.title,description:t.description||"",type:t.type,date:new Date(t.date).toISOString().split("T")[0],time:t.time,location:t.location,teamName:t.teamName||"",opponent:t.opponent||""}),v(!0)},ie=t=>{confirm("Are you sure you want to delete this event?")&&R.mutate(t)},J=t=>{confirm("Are you sure you want to cancel this event?")&&E.mutate(t)},re=t=>{t.preventDefault(),b?B.mutate({id:b,data:n}):Q.mutate(n)},V=t=>{o({...G,date:t.toISOString().split("T")[0]}),v(!0)},S=[];for(let t=0;t<te;t++)S.push(null);for(let t=1;t<=ee;t++)S.push(new Date(p,g,t));const W=d?U(d):[],X=I.filter(t=>new Date(t.date)>=s&&!t.isCancelled).sort((t,c)=>new Date(t.date).getTime()-new Date(c.date).getTime()).slice(0,5),M=Q.isPending||B.isPending;return Z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(K,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Calendar"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage games, practices, and events"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:z==="month"?"default":"outline",size:"sm",onClick:()=>L("month"),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Month"]}),e.jsx(l,{variant:z==="list"?"default":"outline",size:"sm",onClick:()=>L("list"),children:"List"}),e.jsxs(l,{onClick:()=>v(!0),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Add Event"]})]})]}),e.jsx(he,{open:_,onOpenChange:t=>!t&&y(),children:e.jsxs(ue,{className:"sm:max-w-[500px]",children:[e.jsxs(xe,{children:[e.jsx(pe,{children:b?"Edit Event":"Add New Event"}),e.jsx(ge,{children:"Fill in the event details below."})]}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"title",children:"Title"}),e.jsx(j,{id:"title",value:n.title,onChange:t=>o({...n,title:t.target.value}),placeholder:"Event title",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"type",children:"Type"}),e.jsx("select",{id:"type",value:n.type,onChange:t=>o({...n,type:t.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:Ie.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"date",children:"Date"}),e.jsx(j,{id:"date",type:"date",value:n.date,onChange:t=>o({...n,date:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"time",children:"Time"}),e.jsx(j,{id:"time",value:n.time,onChange:t=>o({...n,time:t.target.value}),placeholder:"10:00 AM",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"location",children:"Location"}),e.jsx(j,{id:"location",value:n.location,onChange:t=>o({...n,location:t.target.value}),placeholder:"Event location",required:!0})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"teamName",children:"Team (optional)"}),e.jsx(j,{id:"teamName",value:n.teamName,onChange:t=>o({...n,teamName:t.target.value}),placeholder:"Team name"})]}),n.type==="game"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"opponent",children:"Opponent (optional)"}),e.jsx(j,{id:"opponent",value:n.opponent,onChange:t=>o({...n,opponent:t.target.value}),placeholder:"Opponent team"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"description",children:"Description (optional)"}),e.jsx(me,{id:"description",value:n.description,onChange:t=>o({...n,description:t.target.value}),placeholder:"Additional details...",rows:2})]}),e.jsxs(fe,{children:[e.jsx(l,{type:"button",variant:"outline",onClick:y,disabled:M,children:"Cancel"}),e.jsxs(l,{type:"submit",disabled:M,children:[M&&e.jsx(K,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Save Changes":"Create Event"]})]})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(C,{className:"lg:col-span-2",children:[e.jsx(k,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"text-xl",children:[$e[g]," ",p]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:ne,children:"Today"}),e.jsx(l,{variant:"ghost",size:"icon",onClick:ae,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:se,children:e.jsx(ve,{className:"h-4 w-4"})})]})]})}),e.jsxs(D,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Le.map(t=>e.jsx("div",{className:"p-2 text-center text-sm font-semibold text-muted-foreground",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:S.map((t,c)=>{if(!t)return e.jsx("div",{className:"p-2 h-24"},`empty-${c}`);const f=t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear(),le=d&&t.getDate()===d.getDate()&&t.getMonth()===d.getMonth()&&t.getFullYear()===d.getFullYear(),q=U(t);return e.jsxs("button",{onClick:()=>Y(t),className:`p-2 h-24 text-left rounded-lg border transition-colors hover:bg-muted ${f?"border-primary":"border-transparent"} ${le?"bg-muted ring-2 ring-primary":""}`,children:[e.jsx("span",{className:`text-sm font-medium ${f?"text-primary":""}`,children:t.getDate()}),e.jsxs("div",{className:"mt-1 space-y-1",children:[q.slice(0,2).map(N=>e.jsx("div",{className:`text-xs truncate rounded px-1 py-0.5 text-white ${N.isCancelled?"bg-gray-400 line-through":F(N.type)}`,children:N.title},N.id)),q.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",q.length-2," more"]})]})]},t.toISOString())})}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Games"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Practices"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-purple-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Events"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Meetings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tournaments"})]})]})]})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsx(P,{children:d?d.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"}):"Select a Date"})}),e.jsx(D,{children:d?W.length>0?e.jsxs("div",{className:"space-y-4",children:[W.map(t=>e.jsx("div",{className:`rounded-lg border p-4 hover:bg-muted transition-colors ${t.isCancelled?"opacity-50":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${F(t.type)}`}),e.jsx("h4",{className:`font-semibold ${t.isCancelled?"line-through":""}`,children:t.title}),t.isCancelled&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded",children:"Cancelled"})]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),t.time]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),t.location]}),t.teamName&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),t.teamName,t.opponent&&` vs ${t.opponent}`]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>H(t),children:e.jsx(we,{className:"h-4 w-4"})}),!t.isCancelled&&e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>J(t.id),disabled:E.isPending,children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>ie(t.id),disabled:R.isPending,children:e.jsx(De,{className:"h-4 w-4"})})]})]})},t.id)),e.jsxs(l,{variant:"outline",className:"w-full",onClick:()=>V(d),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Add Event for This Date"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(O,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"No events scheduled"}),e.jsxs(l,{variant:"outline",className:"mt-4",onClick:()=>V(d),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Add Event"]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Click on a date to view or add events"})})]})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsx(P,{children:"Upcoming Events"})}),e.jsx(D,{children:X.length>0?e.jsx("div",{className:"divide-y",children:X.map(t=>e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-1 h-12 rounded-full ${F(t.type)}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(t.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," ","at ",t.time]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.location})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>H(t),children:"Edit"}),e.jsx(l,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>J(t.id),disabled:E.isPending,children:"Cancel"})]})]},t.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(O,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-2"}),"No upcoming events"]})})]})]})}export{pt as component};
