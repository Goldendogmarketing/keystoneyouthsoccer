import{c as T,k as c,l as d,q as P,n as u,t as r,r as S,j as e}from"./main-Cj5NYhJq.js";import{u as F}from"./useQuery-Dpd-_BN-.js";import{u as m}from"./useMutation-Q6yEhfYM.js";import{C as y,b as g,d as p,a as b}from"./card-Ck-Z1Ioi.js";import{B as N}from"./button-cJjcAD9d.js";import{I as K}from"./input-DLMUXFSQ.js";import{c as j}from"./utils-CDN07tui.js";import{P as D}from"./plus-DeJg0nJ7.js";import{T as E}from"./trash-2-Bj50Vj3Q.js";import"./useBaseQuery-BBplwDo0.js";import"./index-B_jtOnfb.js";const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M=T("circle-check",A);const Q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],C=T("circle",Q),L=c({method:"GET"}).handler(d("bc20a2cf2cb0368108a542f40aa9f0f7d5e177afb2f31e84b43694c0d8ec407a")),I=c({method:"POST"}).handler(d("c4f25bb0259b22ffe95c7812c3319346a76dff6aa525798d85e90ac647d66a38")),O=c({method:"POST"}).handler(d("4b1659a76ddc3e19af6b81c4e37e9b2ca51102970c8f67d3f3d2298622b731b9")),_=c({method:"POST"}).handler(d("fd49fb3a6d8ea22bc996b1bd1f256806ee0b02710df99c2b6ecf0f7fcb49b8e6")),i={list:()=>P({queryKey:["todos"],queryFn:async({signal:t})=>await L({signal:t}),staleTime:1e3*60*5})};function z(){const t=u();return m({mutationFn:async s=>await I({data:{text:s}}),onSuccess:()=>{t.invalidateQueries({queryKey:i.list().queryKey}),r.success("Todo created successfully!")},onError:s=>{r.error(s.message||"Failed to create todo")}})}function B(){const t=u();return m({mutationFn:async s=>await O({data:{id:s}}),onSuccess:()=>{t.invalidateQueries({queryKey:i.list().queryKey})},onError:s=>{r.error(s.message||"Failed to toggle todo")}})}function R(){const t=u();return m({mutationFn:async s=>await _({data:{id:s}}),onSuccess:()=>{t.invalidateQueries({queryKey:i.list().queryKey}),r.success("Todo deleted successfully!")},onError:s=>{r.error(s.message||"Failed to delete todo")}})}function G(){const[t,s]=S.useState(""),{data:o=[],isLoading:l}=F(i.list()),n=z(),x=B(),f=R(),k=async a=>{a.preventDefault(),t.trim()&&(await n.mutateAsync(t.trim()),s(""))},v=async a=>{await x.mutateAsync(a)},w=async a=>{await f.mutateAsync(a)},q=o.filter(a=>a.completed).length,h=o.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"To-Do List"}),e.jsx("p",{className:"text-muted-foreground",children:"Keep track of your tasks and stay organized."})]}),e.jsxs(y,{children:[e.jsx(g,{children:e.jsx(p,{children:"Add New Task"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:k,className:"flex gap-2",children:[e.jsx(K,{type:"text",placeholder:"Enter a new task...",value:t,onChange:a=>s(a.target.value),className:"flex-1",disabled:n.isPending}),e.jsxs(N,{type:"submit",disabled:n.isPending||!t.trim(),children:[e.jsx(D,{className:"h-4 w-4"}),"Add"]})]})})]}),e.jsxs(y,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{children:"Tasks"}),h>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[q," of ",h," completed"]})]})}),e.jsx(b,{children:l?e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading tasks..."}):o.length===0?e.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[e.jsx(C,{className:"mx-auto mb-2 h-12 w-12 opacity-50"}),e.jsx("p",{children:"No tasks yet. Add one above to get started!"})]}):e.jsx("div",{className:"space-y-2",children:o.map(a=>e.jsx(H,{todo:a,onToggle:()=>v(a.id),onDelete:()=>w(a.id),isToggling:x.isPending,isDeleting:f.isPending},a.id))})})]})]})}function H({todo:t,onToggle:s,onDelete:o,isToggling:l,isDeleting:n}){return e.jsxs("div",{className:j("flex items-center gap-3 rounded-lg border p-3 transition-all hover:bg-muted/50",t.completed&&"opacity-60"),children:[e.jsx("button",{type:"button",onClick:s,disabled:l,className:"flex-shrink-0","aria-label":t.completed?"Mark as incomplete":"Mark as complete",children:t.completed?e.jsx(M,{className:"h-5 w-5 text-green-600"}):e.jsx(C,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx("span",{className:j("flex-1 text-sm",t.completed&&"line-through text-muted-foreground"),children:t.text}),e.jsx(N,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8 text-muted-foreground hover:text-destructive","aria-label":"Delete task",children:e.jsx(E,{className:"h-4 w-4"})})]})}function ae(){return e.jsx(G,{})}export{ae as component};
