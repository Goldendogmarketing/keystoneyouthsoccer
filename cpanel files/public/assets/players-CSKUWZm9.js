import{k as b,l as v,r as w,j as e}from"./main-Cj5NYhJq.js";import{u as C}from"./useQuery-Dpd-_BN-.js";import{C as r,b as d,e as c,a as l,d as D}from"./card-Ck-Z1Ioi.js";import{I as P}from"./input-DLMUXFSQ.js";import{B as L}from"./button-cJjcAD9d.js";import{U as A}from"./users-C3BdU3O1.js";import{U as p,S,D as B}from"./user-plus-nKVo7cdA.js";import"./useBaseQuery-BBplwDo0.js";import"./utils-CDN07tui.js";import"./index-B_jtOnfb.js";const M=b({method:"GET"}).handler(v("cf6b519c28a7185c535ef2ecc880f9acdf3283dc72c040a449a8f6e9ee918fcd"));function G(){const[i,N]=w.useState(""),{data:a,isLoading:g}=C({queryKey:["admin-players"],queryFn:async()=>await M()}),m=a?.filter(s=>{if(!i)return!0;const t=i.toLowerCase();return s.player.firstName.toLowerCase().includes(t)||s.player.lastName.toLowerCase().includes(t)||s.parent.name?.toLowerCase().includes(t)||s.parent.email.toLowerCase().includes(t)}),x=s=>{const t=new Date,o=new Date(s);let j=t.getFullYear()-o.getFullYear();const u=t.getMonth()-o.getMonth();return(u<0||u===0&&t.getDate()<o.getDate())&&j--,j},n=a?.length||0,h=a?.filter(s=>s.player.gender==="male").length||0,f=a?.filter(s=>s.player.gender==="female").length||0,y=a?.length?Math.round(a.reduce((s,t)=>s+x(t.player.dateOfBirth),0)/a.length):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight md:text-4xl",children:"Players"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"View and manage all registered players in the system"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(r,{className:"enterprise-card",children:[e.jsx(d,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Players"}),e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(A,{className:"h-5 w-5 text-primary"})})]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:n}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Registered players"})]})]}),e.jsxs(r,{className:"enterprise-card",children:[e.jsx(d,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium",children:"Male"}),e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary/10",children:e.jsx(p,{className:"h-5 w-5 text-secondary"})})]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:h}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[n>0?Math.round(h/n*100):0,"% of total"]})]})]}),e.jsxs(r,{className:"enterprise-card",children:[e.jsx(d,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium",children:"Female"}),e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-success/10",children:e.jsx(p,{className:"h-5 w-5 text-success"})})]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:f}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[n>0?Math.round(f/n*100):0,"% of total"]})]})]}),e.jsxs(r,{className:"enterprise-card",children:[e.jsx(d,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium",children:"Average Age"}),e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-accent/10",children:e.jsx("span",{className:"text-lg font-semibold text-accent",children:"#"})})]})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:y}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Years old"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(S,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(P,{placeholder:"Search players by name or parent...",value:i,onChange:s=>N(s.target.value),className:"pl-10"})]}),e.jsxs(L,{variant:"outline",className:"hover-gold-bg",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Export List"]})]}),g?e.jsx(r,{children:e.jsx(l,{className:"py-12",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading players..."})})})}):m&&m.length>0?e.jsxs(r,{className:"enterprise-card",children:[e.jsxs(d,{children:[e.jsxs(D,{children:["Player Directory (",m.length,")"]}),e.jsx(c,{children:"Complete list of all registered players"})]}),e.jsx(l,{children:e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/50",children:[e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Name"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Age"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Gender"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Date of Birth"}),e.jsx("th",{className:"p-4 text-left text-sm font-semibold",children:"Parent"})]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{className:"border-b border-border transition-colors hover:bg-muted/50 hover-gold-bg",children:[e.jsx("td",{className:"p-4 text-sm",children:e.jsxs("div",{className:"font-medium",children:[s.player.firstName," ",s.player.lastName]})}),e.jsx("td",{className:"p-4 text-sm",children:e.jsx("span",{className:"font-semibold",children:x(s.player.dateOfBirth)})}),e.jsx("td",{className:"p-4 text-sm",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-muted px-2 py-1 text-xs font-medium capitalize",children:s.player.gender})}),e.jsx("td",{className:"p-4 text-sm text-muted-foreground whitespace-nowrap",children:new Date(s.player.dateOfBirth).toLocaleDateString()}),e.jsxs("td",{className:"p-4 text-sm",children:[e.jsx("div",{className:"font-medium",children:s.parent.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.parent.email})]})]},s.player.id))})]})})})]}):e.jsx(r,{children:e.jsx(l,{className:"py-12 text-center text-muted-foreground",children:i?"No players found matching your search.":"No players registered yet."})})]})}export{G as component};
